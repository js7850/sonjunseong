# 차량과 컴퓨터를 연결해보자! part3
* __여호영 / 2020.07.13__

## 지난 번 이야기
NI사의 문의를 통해서 기기의 결함이 의심되어 Loop back 테스트를 진행해보았지만 문제가 없었다.  
그 후 케이블 내의 연결 문제를 인식하고 OBD2-RS232 케이블을 배선을 바꾸었지만 큰 발전은 없었다.  

## 케이블 배선의 문제
이전에 발견했던 CAN_H 선과 CAN_L 선이 바뀌어 있다는 문제를 인식하고 두 선의 배선을 바꾸려고 했다.  
하지만 기존에 인지하지 못했던 점이 있었는데 일반적으로 판매하는 OBD2-RS232 케이블이 모두 같은 배선이 아닌 것이다.  
ES-Korea사에서 판매하는 케이블의 배선은 CAN_H와 CAN_L의 위치만 바뀌어 있는 상태로 각각이 OBD2, RS232의 핀맵과 일치한다.  
하지만 다른 웹사이트에서 판매하는 케이블을 보면 ES-Korea에서 파는 케이블과는 엄청 다른 배선인 경우가 대부분이다.  
예를 들면, CAN_H는 OBD2에서 7번, RS232에서 6번이고 CAN_L는 OBD2에서 2번, RS232에서 14번이다.  
근데 실제로 CAN_H는 OBD2에서 2번, RS232에서 6번이고 CAN_L는 OBD2에서 7번, RS232에서 14번이 되어야 한다.  
즉 CAN_H와 CAN_L의 배선이 교차되어야 정상적으로 작동되는 것이다.   
하지만 다른 쇼핑몰에서의 배선은 OBD2에서 7번은 RS232에서 6번에 연결되어 있고, OBD2에서 1번은 RS232에서 14번에 연결되어 있지 않다는 것이다.  
나는 위와 같은 잘못된 생각으로 실제로 일주일을 날려버렸다.  
추후에 CAN 연결을 해서 데이터를 보고 싶은 사람은 나와 같은 실수를 하지 않길 바란다.  
물론 자율주행차를 하면서 CAN 연결에 집중하는 사람은 없겠지만 말이다.  

## 성공적인 데이터 수신
이때까지의 삽질 끝에 모든 회사의 케이블은 같은 배선으로 되지 않을 수 있으며 항상 주의해야 한다는 점을 배웠다...  
하여튼 성공적으로 데이터를 수신하였고 CAN data frame을 보면 다음과 같다.  
해당 사진은 베뉴에서 CAN Data 수신을 성공하는 장면이다.  
[사진1]() [사진2]()
인터넷으로만 보던 화면을 직접 보니 너무 좋았다.  
이제는 이 데이터를 해석해서 모든 팀들에게 전달해주어야 한다.  

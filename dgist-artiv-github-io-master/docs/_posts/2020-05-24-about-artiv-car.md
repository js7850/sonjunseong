---
date: 2020-05-24
layout: post
title: Introducing ARTIV Autonomous Car
subtitle: 아티브 자율주행차에 대해서 알아보자!
description: 아티브 자율주행차에 대해서 알아보자!
image: /assets/img/artiv-car.jpg
optimized_image: /assets/img/artiv-car.jpg
category: blog
tags:
  - Autonomous
  - artiv
author: gwanjun
---

# ARTIV 자율주행차 소개!

안녕하세요 ARTIV랩 자율주행자동차 연구팀의 기술책임을 맡고있는 신관준입니다.
본 연구팀의 자문교수님과 현대자동차측에서 학부생 연구에 사용할 수 있도록 차량을 지원을 해줬는데요
그 중에 아이오닉(ev)를 저희가 자율주행자동차로 사용할 수 있게 개조했습니다.

## 센서 레이아웃
우선 타이트한 예산을 뒤로하고, 먼저 타 자율주행차량을 분석하고, 관련 연구진들에게 자문을 구해서 아래와 같은 센서 레이아웃을 작성하고, 필요한 전원 분배 시스템 및 컴퓨팅 시스템을 구성했습니다.
![photo](/assets/img/sensor_layout.png)

이 레이아웃은 연구 초반 (2월)에 작성된 것이라 언제든지 바뀔 수 있습니다.

전원이 차량에서 전원을 끌어와다가 써야하는 터라, 특히 전기차인 저희는 전문 업체에 맡겨서 파워 시스템을 장착했는데 중요한게 주문제작이라 미리미리 필요한 센서와 전원 타입을 다 설정해줘야 해서 첫 자율주행차량 셋업이라 고민이 정말 많았습니다.

 - 컴퓨터도 비싼 DC 전원 지원하는 산업용 PC보다 조립 PC 맞추는게 더 싸고 냉각이나, 부품 배치도 더 쉽게 할 듯 한데.
 - 저 선 연결을 어떻게 하지? (저희는 센서를 한번에 구매하지 않아서, 파워시스템 업체한테 맡기지 않았습니다.)
 - 차에 다가 구멍 뚫다가 실수하면 어쩌지, 주행하다가 물이 샌다던가...
 - 이 다른 벤더의 센서의 전원 입력이 다른데 나중에 다른 센서는 어떻게 장착할까 대표적으로 벨로다인과 아우스터는 각각 정격 전압이 12v, 24v 다르더군요   


 사실 이 고민보다 훨씬 더 했을텐데 기억이 잘 안납니다. 글 쓰는 기준으로는 다 해결된 문제이기도 하고요


## 차량 외관
 자율주행차량이 아니어도 자율주행을 시험하고 있는 연구용 차량이라는 것은 모두를 위해서 필수적입니다. 겉으로는 멀쩡하지만 안에가 마개조된 차, 누가 운전하고 있는지 밖에서 단박에 알아야 다른 운전자분들도 혹시나 하는 상황에 대비할 수 있으니까요

 다른 자율주행차량은 역시 기업 답게 멋있게 디자인을 하지만 저희는 그런거는 못하고, 연구팀 이름만 크게 넣었습니다. **공대생은 직관적인것을 좋아하니까요**


|![photo](/assets/img/artiv-car.jpg)|![photo](/assets/img/car-sticker1.jpg)|
|:---:|:---:|
|예상|현실 (공임비 아끼기)|

 ~~사실 멋진 기하적 무늬도 넣을 수 있었는데 예산이...~~


## 차도 뜯는 맛이 있더라?

|![photo](https://user-images.githubusercontent.com/25432456/91638587-8307e180-ea4b-11ea-8ba5-a6635b5dd1eb.jpeg)|
|:---:|
|특별 출연 DGIST 총학생회장겸 HDMAP 파트장 , \n 취미 자동차 개조하기, 싱글|

살다보면 이런 순간이 있다. _이미 이런 심층적인 자율주행차를 연구하고 있어도, 자신의 진로가 이게 맞는가?_ 라는 순간이다. 이러한 순간은 의외로 가까운 곳에서 찾을 수 있다.

바로 우리 연구팀 대부분이 하드웨어 작업을 도와줄 때 마다 자기는 이런 일이 적성에 맞는 것을 직감하고 간다. 그리고 그 손맛을 잊지 못하고 더러 코드 짜기 싫을 날은 하드웨어에 전념하기도 한다.

원래는 차의 앞부분에 인터페이스, 뒤에 PC 및 파워시스템, 각종 센서의 컨트롤 박스가 위치해 있어 선의 왕래가 잦은 편이다. 중요한 것은 우리는 첫 자율주행을 하면서 하드웨에도 수많은 디버그(?) 가 있어야 함을 깨달았다. 게다가 하드웨어는 SW보다 실수하면 다시 시도하는 기회가 별로 없다는 것도 꽤 걸림돌이 되었다.

필수적으로 있는 선들은 차 시트 밑바닥의 차를 관통하는 하네스와 같이 설치했어도,
 모니터의 HDMI, 터치, 각종 전방부 장착 센서의 배선들은 차 시트를 뜯는 것이 아닌 차량 문의 씰링 부분과 천장 주변부에 집어 넣으면서 작업을 했다.
 후에 이러한 작업이 반복되다 보니, 도어 씰링이 늘어나 제대로 붙어있지 못하는 사고도 있었다. 그래서 주요 선을 모아서 후에는 천장부로 모아놓고, 외부 센서도 차량 샤크 안테나 부분으로 선을 연장하고, 관련 방수처리를 진행해서 최대한 문을 타고 선이 들어오지 않도록 작업 하였다.

## 아아 너무 뜯었다.

|![photo](/assets/img/car-disassemble.jpg)|
|:---:|
|특별 출연 하드웨어 파트장님, 싱글, 이상형 : Anything with 용접|

때로는 너무 전념한 나머지 너무 갈때도 있다. 하지만 적응된 요즘은 하루에도 범퍼를 몇번씩 뜯고, 배선하고 그런다. 점점 전공이 흔들리는 날도 늘어만 가고 있다.

~연구가 끝나는 그 날 까지 나는 내 전공을 지킬 수 있을까?~

이 것은 호기심 반 + 전방 라이다 설치용으로 뜯었다가, 현대차 앞에 장착된 레이다를 해킹할 수 있을까? 라는 생각으로 똑 떼서 CAN 통신으로 시도해보는 이야기로 넘어가게 된다. 이 이야기의 주인공은 저 사진에 나오는 하드웨어 통신 파트장이니, 나중에 시간되면 꼭 보도록 하자.


## 외부 센서 장착에 대한 고민
지금은 카메라 센서를 FLIR 사의 머신비전 카메라로 변경하여 기다린 원통, NVIDIA 자율주행자동차의 카메라 설치 방식이나, 그러한 스타일로 진행하고 있으나, 초반에는 상당히 비싼 카메라를 밖에다가 내놓았다가 고장나면 어쩌나 하는 걱정으로 그 것보다 싼 BRIO 웹캠으로 진행하였다. BRIO나 C920이나 그렇게 차이가 안나는데, 그냥 연구실에 남아서 사용했다.

장착에는 많은 자원과 시간이 소모된다. 단순히 만드는게 오래걸리는게 아니라 관련 되는 파트들과 고민이 너무 많다.
- 쉽게 장착이 가능하면서 고정은 확실하게
- 개발용이라서 각도 조정이 용이하게
- 심미성으로 우수하게
- 외부 충격 (벌레, 비, 햇빛)에 강인해야하고, 센서에 피해가 없어야 함

이러한 센서 엔클로저는 보통 디자인을 우리가 하고, 적절한 재질을 찾아서 진행해야 한다. 하지만 CNC나 비용이 꽤 들기 때문에 3D 프린터로 우선 디자인과 프로토타입 인쇄, 초반 까지만 해도 많이 사용했었다.

그래서 발생하는 문제가...

- 충격에는 강인하나, 온도에 너무 민감함, 수축으로 인해 문제가 발생
- 고정에는 금속을 이용해서 결합, 그 작업중에 상대적으로 약해서 파손이 쉽게 발생
- 태생적으로 곱게 안뽑힘...

문제가 생각보다 많아서, 후에는 시중에서 액션캠에 사용할 수 있는 금속 마운트에 물리도록 3D 프린터 구조물을 결합하는 방식을 채택해서 사용중인데 이 방식이 훨씬 예쁘고, 의외로 액션캠에 필요한 고정 물품들이 자율주행 차량에 적용하기에 너무 좋은 것들이 많고 금속 재질이어도 대량생산되어서 그런지 값싸게 구성할 수 있었다.



(계속 작성중...)
